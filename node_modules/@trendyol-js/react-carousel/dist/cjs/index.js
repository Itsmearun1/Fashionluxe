"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var o="styles-module_carousel-base__3keqD",s="styles-module_item-provider__YgMwz",a="styles-module_item-container__a8zaY",l="styles-module_item-tracker__3bypy",u="styles-module_carousel-arrow__26sRw";i(".styles-module_carousel-base__3keqD {\n\twidth: 100%;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\toutline: none;\n\tposition: relative;\n}\n\n.styles-module_item-provider__YgMwz {\n\toverflow: hidden;\n\twidth: 100%;\n\tcursor: pointer;\n}\n\n.styles-module_item-container__a8zaY img {\n\t-webkit-user-select: none;\n\t        user-select: none;\n\t-webkit-user-drag: none;\n}\n\n.styles-module_item-tracker__3bypy {\n\theight: 100%;\n\tdisplay: flex;\n}\n\n.styles-module_carousel-arrow__26sRw {\n\tz-index: 1;\n}\n");var c,f=function(e){return n.createElement("button",{className:u,onClick:e.onClick,"data-direction":e.direction})};!function(e){e[e.Right=-1]="Right",e[e.Left=1]="Left"}(c||(c={}));var d=function(){function e(e,t){this.arr=e,this.currentIndex=t}return e.prototype.next=function(){var e=this.currentIndex,t=this.arr;return this.currentIndex=e<t.length-1?e+1:0,this.current()},e.prototype.prev=function(){var e=this.currentIndex,t=this.arr;return this.currentIndex=e>0&&e<t.length?e-1:t.length-1,this.current()},e.prototype.current=function(){return this.arr[this.currentIndex]},e}(),h=function(e,t,n){return n*e*t},m=function(e){var t=e.itemCount,n=e.itemsToShow,r=e.infinite,i=e.current,o=e.hideArrows;if(void 0!==o&&o)return{left:!1,right:!1};var s=t>n;return r?{left:s,right:s}:{left:s&&0!==i,right:s&&i+n<t}},v=function(e,t,n){if(!n)return e;for(var r=Array.from(e),i=new d(e,0),o=0;o<t;o++)r.unshift(i.prev());return r};function g(e){return e.nativeEvent instanceof MouseEvent?e.nativeEvent.pageX:e.nativeEvent instanceof TouchEvent?e.nativeEvent.changedTouches[0].pageX:0}function p(e,t,n,r,i){if(n&&n.length<t.length)return v(t,r,i);var o=e.map((function(e){return t.find((function(t){return e.key===t.key}))}));return o.some((function(e){return void 0===e}))?v(t,r,i):o}var w=function(e){var n=t.useState("undefined"==typeof window?0:window.innerWidth),r=n[0],i=n[1];t.useLayoutEffect((function(){var t=function(){var t=r-window.innerWidth;i(window.innerWidth),e(t)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[])},y=function(e){var i=t.useState(200),o=i[0],u=i[1],f=t.useCallback((function(t){if(null!==t){var n=t.getBoundingClientRect().width/e.show;u(n),e.widthCallBack(n)}}),[o]);e.responsive&&w((function(e){u(o-e)}));var d=t.useState({initial:e.transform,start:0,isDown:!1,drag:0,finished:!0,pointers:!0}),h=d[0],m=d[1],v=function(t){t.persist(),m(r(r({},h),{isDown:!0,start:g(t),initial:e.transform,finished:!1}))},p=function(t){if(t.persist(),!h.finished){if(Math.abs(h.drag)<o*e.swipeOn)return e.dragCallback(e.transform),m({initial:e.transform,start:0,isDown:!1,drag:0,finished:!0,pointers:!0});e.slideCallback(h.drag>0?c.Right:c.Left),m(r(r({},h),{drag:0,isDown:!1,finished:!0,pointers:!0}))}},y=function(t){if(t.persist(),h.isDown){var n=g(t);m(r(r({},h),{drag:h.start-n,pointers:Math.abs(h.start-n)<e.triggerClickOn}))}},_=e.swiping?{onTouchCancel:p,onTouchEnd:p,onTouchMove:y,onTouchStart:v,onMouseDown:v,onMouseLeave:p,onMouseUp:p,onMouseMove:y}:{};return n.createElement("div",{ref:f,className:s},n.createElement("div",r({"data-testid":"trackList"},_,{className:l,style:{transform:"translateX("+(e.transform-h.drag)+"px)",transition:"transform "+e.transition+"s ease 0s",width:o*e.items.length}}),e.items.map((function(e,t){return n.createElement("div",{key:t,style:{width:o,pointerEvents:h.pointers?"all":"none"},className:a},e)}))))},_={children:[],show:1,slide:1,transition:.5,swiping:!1,swipeOn:1,responsive:!1,infinite:!0,className:"",useArrowKeys:!1,a11y:{},dynamic:!1,paginationCallback:null,pageCount:0,rightArrow:null,leftArrow:null,autoSwipe:null,navigation:null,triggerClickOn:Number.MIN_SAFE_INTEGER,hideArrows:!1},b="styles-module_carousel-navigation__1g_vs";i(".styles-module_carousel-navigation__1g_vs {\n\tdisplay: flex;\n\tposition: absolute;\n\tbottom: 0;\n}\n");var k=function(e){var t=e.items,r=e.current,i=e.onClick,o=e.factory;return n.createElement("div",{className:b},t.map((function(e,t){return n.createElement("div",{onMouseOver:function(){return i(t)},key:t},o(r===t))})))},E="styles-module_sliderBase__swkx1",C="styles-module_slider__o0fqa",L="styles-module_sliding__3T6T6";i(".styles-module_sliderBase__swkx1 {\n\twidth: 100%;\n\tposition: relative;\n}\n\n.styles-module_slider__o0fqa {\n\tdisplay: flex;\n\toverflow-x: auto;\n\tscrollbar-width: none; /* Firefox 64 */\n\t-ms-overflow-style: none; /* Internet Explorer 11 */\n}\n\n.styles-module_slider__o0fqa::-webkit-scrollbar {\n\t/** WebKit */\n\tdisplay: none;\n}\n\n.styles-module_slider__o0fqa > * {\n\tflex: 0 0 auto;\n}\n\n.styles-module_sliding__3T6T6 > * {\n\tpointer-events: none;\n}\n");exports.Carousel=function(e){var i,s,a,l,u=r(r({},_),e),g=v(u.children,u.navigation?u.children.length-1:u.slide,u.infinite),w=t.useState(g),b=w[0],E=w[1],C=t.useRef(g),L=t.useState(0),S=L[0],x=L[1],R=t.useState({transform:0,transition:0,isSliding:!1}),M=R[0],T=R[1],A=t.useState(0),N=A[0],I=A[1],D=t.useState(m({itemCount:u.children.length,itemsToShow:u.show,infinite:u.infinite,current:N,hideArrows:u.hideArrows})),O=D[0],W=D[1],z=(a=e.children,l=t.useRef(),t.useEffect((function(){l.current=a})),l.current),X=t.useState(0),q=X[0],B=X[1],j=t.useRef(!1),K=t.useRef(null),Y=t.useRef(),P="function"==typeof u.navigation;u.dynamic&&t.useEffect((function(){var e=p(C.current,u.children,z,u.slide,u.infinite);E(e),C.current=e,q<u.pageCount&&z&&(null==z?void 0:z.length)<u.children.length&&(U(c.Right),B(q+1))}),[u.children]),t.useEffect((function(){F()}),[]);var F=function(){clearTimeout(Y.current),K&&"number"==typeof u.autoSwipe&&u.autoSwipe>u.transition&&(Y.current=setTimeout((function(){K.current&&K.current.click()}),u.autoSwipe))},U=function(e,t){if(!(M.isSliding||e===c.Right&&!O.right||e===c.Left&&!O.left)){if(u.paginationCallback&&e===c.Right&&q<u.pageCount-1&&!j.current)return j.current=!0,void u.paginationCallback(e);var n=u.children,r=function(e,t,n,r){var i=e-r*t;return i<0?n+i:n<=i?i-n:i}(N,u.slide,n.length,e),i="number"==typeof t?t-N:-1*e,o=u.infinite?P?function(e,t,n,r,i,o){var s=function(e,t,n){var r=e+t>=n.length?e+t-n.length:e+t;return r<0?n.length+r:r}(n,i,e),a=Math.floor(t.length/2),l=new d(e,s),u=Array.from(t);switch(+o){case c.Left:for(var f=0;f<a;f++){var h=a-(Math.abs(i)+f)-r;(h<0||!u[h])&&u.unshift(l.current()),l.prev()}break;case c.Right:for(f=0;f<a;f++)u[a+i+f+r]||u.push(l.current()),l.next()}return u}(n,b,r,u.show,i,e):function(e,t,n,r,i,o){var s=new d(e,n),a=Array.from(t);switch(+o){case c.Left:for(var l=i;l>=0;l--)(i-l<0||!a[l-i])&&a.unshift(s.current()),s.prev();break;case c.Right:for(l=0;l<r+i;l++)a[2*i+l]||a.push(s.current()),s.next()}return a}(n,b,r,u.show,u.slide,e):b;u.infinite&&e===c.Right&&(E(o),C.current=o),T({transform:M.transform+Math.abs(i)*h(S,u.slide,e),transition:u.transition,isSliding:!0}),I(P&&"number"==typeof t?t:r),W(m({itemCount:n.length,itemsToShow:u.show,infinite:u.infinite,current:r,hideArrows:u.hideArrows})),setTimeout((function(){if(u.infinite){var n=P?function(e,t,n){return n===c.Left?e.slice(0,t):e.slice(t)}(e===c.Right?C.current:o,function(e,t,n,r){return"number"==typeof e?r===c.Right?e-t+1:n:-1*r}(t,r,i,e),e):function(e,t,n){return n===c.Left?e.slice(0,-1*t):e.slice(t)}(e===c.Right?C.current:o,u.slide,e);E(n),C.current=n}T({transform:u.infinite?h(S,u.navigation?u.children.length-1:u.slide,c.Right):M.transform+h(S,u.slide,e),transition:0,isSliding:!1}),F()}),1e3*u.transition),j.current=!1}};return n.createElement("div",r({},u.a11y,{"data-testid":"carousel",tabIndex:0},u.useArrowKeys?{onKeyDown:function(e){37===e.keyCode?U(c.Left):39===e.keyCode&&U(c.Right)}}:{},{className:o+" "+u.className}),O.left&&n.createElement("div",{onClick:function(){return U(c.Left)}},null!==(i=u.leftArrow)&&void 0!==i?i:n.createElement(f,{direction:"left"})),n.createElement(y,r({},u,{transition:M.transition,items:C.current,transform:M.transform,slideCallback:function(e){U(e)},dragCallback:function(e){T({transform:e,transition:u.transition,isSliding:!1}),setTimeout((function(){return T(r(r({},M),{transition:0}))}),1e3*u.transition)},widthCallBack:function(e){x(e),T({transform:u.infinite?h(e,u.navigation?u.children.length-1:u.slide,c.Right):0,transition:0,isSliding:!1})}})),O.right&&n.createElement("div",{onClick:function(){return U(c.Right)},ref:K},null!==(s=u.rightArrow)&&void 0!==s?s:n.createElement(f,{direction:"right"})),P&&n.createElement(k,{factory:u.navigation,items:u.children,current:N,onClick:function(e){N!==e&&U(e>N?c.Right:c.Left,e)}}))},exports.ScrollingCarousel=function(e){var r=e.children,i=e.className,o=e.leftIcon,s=e.rightIcon,a=t.useRef(null),l=t.useState(!1),u=l[0],f=l[1],d=t.useState({startX:0,scrollLeft:0}),h=d[0],m=d[1],v=function(){var e=a.current;return{left:!!e&&e.scrollLeft>0,right:!!e&&e.scrollWidth>e.scrollLeft+e.offsetWidth}},g=t.useState(v()),p=g[0],w=g[1],y=function(e){w(v())},_=t.useCallback((function(e){null!==e&&(Object.defineProperty(a,"current",{value:e}),w(v()),e.addEventListener("scroll",y))}),[a,r]),b=function(e){f(!1),w(v()),a.current.classList.remove(L)},k=function(e){var t=function(e){for(var t,n,r=a.current,i=e===c.Left?r.scrollLeft+r.offsetWidth:r.scrollLeft,o=0,s=0,l=Array.from(r.children);s<l.length;s++){var u=l[s],f=(t=u,n=void 0,n=getComputedStyle(t),t.offsetWidth+(parseInt(n.marginLeft,10)||0)+(parseInt(n.marginRight,10)||0));if((o+=f)>=i){var d=e===c.Left?o-i:f;return(r.offsetWidth-d)*e}}return r.offsetWidth}(e),n=a.current.scrollLeft;S(500,t,n)},S=function(e,t,n){for(var r=0,i=0;r<=e;i++)window.setTimeout(x,r,i*t/100+n),r+=e/100},x=function(e){a.current.scrollLeft=e},R=function(e,t,r){return n.createElement("div",{"data-arrow":t,onClick:function(){return k(e)}},null!=r?r:n.createElement("button",null))};return n.createElement("div",{className:E+" "+i,"data-testid":"carousel"},p.left&&R(c.Right,"left",o),p.right&&R(c.Left,"right",s),n.createElement("div",{ref:_,onMouseDown:function(e){f(!0),m({startX:e.pageX-a.current.offsetLeft,scrollLeft:a.current.scrollLeft})},onMouseLeave:b,onMouseUp:b,onMouseMove:function(e){if(u){e.preventDefault(),a.current.classList.add(L);var t=e.pageX-a.current.offsetLeft-h.startX;a.current.scrollLeft=h.scrollLeft-t}},className:C},r))};
