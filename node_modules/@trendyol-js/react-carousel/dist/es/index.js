import t,{useRef as e,useEffect as n,useState as r,useLayoutEffect as i,useCallback as o}from"react";var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var l="styles-module_carousel-base__3keqD",u="styles-module_item-provider__YgMwz",c="styles-module_item-container__a8zaY",f="styles-module_item-tracker__3bypy",d="styles-module_carousel-arrow__26sRw";a(".styles-module_carousel-base__3keqD {\n\twidth: 100%;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\toutline: none;\n\tposition: relative;\n}\n\n.styles-module_item-provider__YgMwz {\n\toverflow: hidden;\n\twidth: 100%;\n\tcursor: pointer;\n}\n\n.styles-module_item-container__a8zaY img {\n\t-webkit-user-select: none;\n\t        user-select: none;\n\t-webkit-user-drag: none;\n}\n\n.styles-module_item-tracker__3bypy {\n\theight: 100%;\n\tdisplay: flex;\n}\n\n.styles-module_carousel-arrow__26sRw {\n\tz-index: 1;\n}\n");var h,m=function(e){return t.createElement("button",{className:d,onClick:e.onClick,"data-direction":e.direction})};!function(t){t[t.Right=-1]="Right",t[t.Left=1]="Left"}(h||(h={}));var v=function(){function t(t,e){this.arr=t,this.currentIndex=e}return t.prototype.next=function(){var t=this.currentIndex,e=this.arr;return this.currentIndex=t<e.length-1?t+1:0,this.current()},t.prototype.prev=function(){var t=this.currentIndex,e=this.arr;return this.currentIndex=t>0&&t<e.length?t-1:e.length-1,this.current()},t.prototype.current=function(){return this.arr[this.currentIndex]},t}(),g=function(t,e,n){return n*t*e},p=function(t){var e=t.itemCount,n=t.itemsToShow,r=t.infinite,i=t.current,o=t.hideArrows;if(void 0!==o&&o)return{left:!1,right:!1};var s=e>n;return r?{left:s,right:s}:{left:s&&0!==i,right:s&&i+n<e}},w=function(t,e,n){if(!n)return t;for(var r=Array.from(t),i=new v(t,0),o=0;o<e;o++)r.unshift(i.prev());return r};function y(t){return t.nativeEvent instanceof MouseEvent?t.nativeEvent.pageX:t.nativeEvent instanceof TouchEvent?t.nativeEvent.changedTouches[0].pageX:0}function _(t,e,n,r,i){if(n&&n.length<e.length)return w(e,r,i);var o=t.map((function(t){return e.find((function(e){return t.key===e.key}))}));return o.some((function(t){return void 0===t}))?w(e,r,i):o}var b=function(t){var e=r("undefined"==typeof window?0:window.innerWidth),n=e[0],o=e[1];i((function(){var e=function(){var e=n-window.innerWidth;o(window.innerWidth),t(e)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[])},k=function(e){var n=r(200),i=n[0],a=n[1],l=o((function(t){if(null!==t){var n=t.getBoundingClientRect().width/e.show;a(n),e.widthCallBack(n)}}),[i]);e.responsive&&b((function(t){a(i-t)}));var d=r({initial:e.transform,start:0,isDown:!1,drag:0,finished:!0,pointers:!0}),m=d[0],v=d[1],g=function(t){t.persist(),v(s(s({},m),{isDown:!0,start:y(t),initial:e.transform,finished:!1}))},p=function(t){if(t.persist(),!m.finished){if(Math.abs(m.drag)<i*e.swipeOn)return e.dragCallback(e.transform),v({initial:e.transform,start:0,isDown:!1,drag:0,finished:!0,pointers:!0});e.slideCallback(m.drag>0?h.Right:h.Left),v(s(s({},m),{drag:0,isDown:!1,finished:!0,pointers:!0}))}},w=function(t){if(t.persist(),m.isDown){var n=y(t);v(s(s({},m),{drag:m.start-n,pointers:Math.abs(m.start-n)<e.triggerClickOn}))}},_=e.swiping?{onTouchCancel:p,onTouchEnd:p,onTouchMove:w,onTouchStart:g,onMouseDown:g,onMouseLeave:p,onMouseUp:p,onMouseMove:w}:{};return t.createElement("div",{ref:l,className:u},t.createElement("div",s({"data-testid":"trackList"},_,{className:f,style:{transform:"translateX("+(e.transform-m.drag)+"px)",transition:"transform "+e.transition+"s ease 0s",width:i*e.items.length}}),e.items.map((function(e,n){return t.createElement("div",{key:n,style:{width:i,pointerEvents:m.pointers?"all":"none"},className:c},e)}))))},L={children:[],show:1,slide:1,transition:.5,swiping:!1,swipeOn:1,responsive:!1,infinite:!0,className:"",useArrowKeys:!1,a11y:{},dynamic:!1,paginationCallback:null,pageCount:0,rightArrow:null,leftArrow:null,autoSwipe:null,navigation:null,triggerClickOn:Number.MIN_SAFE_INTEGER,hideArrows:!1},E="styles-module_carousel-navigation__1g_vs";a(".styles-module_carousel-navigation__1g_vs {\n\tdisplay: flex;\n\tposition: absolute;\n\tbottom: 0;\n}\n");var C=function(e){var n=e.items,r=e.current,i=e.onClick,o=e.factory;return t.createElement("div",{className:E},n.map((function(e,n){return t.createElement("div",{onMouseOver:function(){return i(n)},key:n},o(r===n))})))},x=function(i){var o,a,u,c,f=s(s({},L),i),d=w(f.children,f.navigation?f.children.length-1:f.slide,f.infinite),y=r(d),b=y[0],E=y[1],x=e(d),R=r(0),T=R[0],M=R[1],A=r({transform:0,transition:0,isSliding:!1}),S=A[0],N=A[1],I=r(0),D=I[0],W=I[1],O=r(p({itemCount:f.children.length,itemsToShow:f.show,infinite:f.infinite,current:D,hideArrows:f.hideArrows})),z=O[0],X=O[1],B=(u=i.children,c=e(),n((function(){c.current=u})),c.current),q=r(0),K=q[0],Y=q[1],j=e(!1),F=e(null),P=e(),U="function"==typeof f.navigation;f.dynamic&&n((function(){var t=_(x.current,f.children,B,f.slide,f.infinite);E(t),x.current=t,K<f.pageCount&&B&&(null==B?void 0:B.length)<f.children.length&&(H(h.Right),Y(K+1))}),[f.children]),n((function(){G()}),[]);var G=function(){clearTimeout(P.current),F&&"number"==typeof f.autoSwipe&&f.autoSwipe>f.transition&&(P.current=setTimeout((function(){F.current&&F.current.click()}),f.autoSwipe))},H=function(t,e){if(!(S.isSliding||t===h.Right&&!z.right||t===h.Left&&!z.left)){if(f.paginationCallback&&t===h.Right&&K<f.pageCount-1&&!j.current)return j.current=!0,void f.paginationCallback(t);var n=f.children,r=function(t,e,n,r){var i=t-r*e;return i<0?n+i:n<=i?i-n:i}(D,f.slide,n.length,t),i="number"==typeof e?e-D:-1*t,o=f.infinite?U?function(t,e,n,r,i,o){var s=function(t,e,n){var r=t+e>=n.length?t+e-n.length:t+e;return r<0?n.length+r:r}(n,i,t),a=Math.floor(e.length/2),l=new v(t,s),u=Array.from(e);switch(+o){case h.Left:for(var c=0;c<a;c++){var f=a-(Math.abs(i)+c)-r;(f<0||!u[f])&&u.unshift(l.current()),l.prev()}break;case h.Right:for(c=0;c<a;c++)u[a+i+c+r]||u.push(l.current()),l.next()}return u}(n,b,r,f.show,i,t):function(t,e,n,r,i,o){var s=new v(t,n),a=Array.from(e);switch(+o){case h.Left:for(var l=i;l>=0;l--)(i-l<0||!a[l-i])&&a.unshift(s.current()),s.prev();break;case h.Right:for(l=0;l<r+i;l++)a[2*i+l]||a.push(s.current()),s.next()}return a}(n,b,r,f.show,f.slide,t):b;f.infinite&&t===h.Right&&(E(o),x.current=o),N({transform:S.transform+Math.abs(i)*g(T,f.slide,t),transition:f.transition,isSliding:!0}),W(U&&"number"==typeof e?e:r),X(p({itemCount:n.length,itemsToShow:f.show,infinite:f.infinite,current:r,hideArrows:f.hideArrows})),setTimeout((function(){if(f.infinite){var n=U?function(t,e,n){return n===h.Left?t.slice(0,e):t.slice(e)}(t===h.Right?x.current:o,function(t,e,n,r){return"number"==typeof t?r===h.Right?t-e+1:n:-1*r}(e,r,i,t),t):function(t,e,n){return n===h.Left?t.slice(0,-1*e):t.slice(e)}(t===h.Right?x.current:o,f.slide,t);E(n),x.current=n}N({transform:f.infinite?g(T,f.navigation?f.children.length-1:f.slide,h.Right):S.transform+g(T,f.slide,t),transition:0,isSliding:!1}),G()}),1e3*f.transition),j.current=!1}};return t.createElement("div",s({},f.a11y,{"data-testid":"carousel",tabIndex:0},f.useArrowKeys?{onKeyDown:function(t){37===t.keyCode?H(h.Left):39===t.keyCode&&H(h.Right)}}:{},{className:l+" "+f.className}),z.left&&t.createElement("div",{onClick:function(){return H(h.Left)}},null!==(o=f.leftArrow)&&void 0!==o?o:t.createElement(m,{direction:"left"})),t.createElement(k,s({},f,{transition:S.transition,items:x.current,transform:S.transform,slideCallback:function(t){H(t)},dragCallback:function(t){N({transform:t,transition:f.transition,isSliding:!1}),setTimeout((function(){return N(s(s({},S),{transition:0}))}),1e3*f.transition)},widthCallBack:function(t){M(t),N({transform:f.infinite?g(t,f.navigation?f.children.length-1:f.slide,h.Right):0,transition:0,isSliding:!1})}})),z.right&&t.createElement("div",{onClick:function(){return H(h.Right)},ref:F},null!==(a=f.rightArrow)&&void 0!==a?a:t.createElement(m,{direction:"right"})),U&&t.createElement(C,{factory:f.navigation,items:f.children,current:D,onClick:function(t){D!==t&&H(t>D?h.Right:h.Left,t)}}))},R="styles-module_sliderBase__swkx1",T="styles-module_slider__o0fqa",M="styles-module_sliding__3T6T6";a(".styles-module_sliderBase__swkx1 {\n\twidth: 100%;\n\tposition: relative;\n}\n\n.styles-module_slider__o0fqa {\n\tdisplay: flex;\n\toverflow-x: auto;\n\tscrollbar-width: none; /* Firefox 64 */\n\t-ms-overflow-style: none; /* Internet Explorer 11 */\n}\n\n.styles-module_slider__o0fqa::-webkit-scrollbar {\n\t/** WebKit */\n\tdisplay: none;\n}\n\n.styles-module_slider__o0fqa > * {\n\tflex: 0 0 auto;\n}\n\n.styles-module_sliding__3T6T6 > * {\n\tpointer-events: none;\n}\n");var A=function(n){var i=n.children,s=n.className,a=n.leftIcon,l=n.rightIcon,u=e(null),c=r(!1),f=c[0],d=c[1],m=r({startX:0,scrollLeft:0}),v=m[0],g=m[1],p=function(){var t=u.current;return{left:!!t&&t.scrollLeft>0,right:!!t&&t.scrollWidth>t.scrollLeft+t.offsetWidth}},w=r(p()),y=w[0],_=w[1],b=function(t){_(p())},k=o((function(t){null!==t&&(Object.defineProperty(u,"current",{value:t}),_(p()),t.addEventListener("scroll",b))}),[u,i]),L=function(t){d(!1),_(p()),u.current.classList.remove(M)},E=function(t){var e=function(t){for(var e,n,r=u.current,i=t===h.Left?r.scrollLeft+r.offsetWidth:r.scrollLeft,o=0,s=0,a=Array.from(r.children);s<a.length;s++){var l=a[s],c=(e=l,n=void 0,n=getComputedStyle(e),e.offsetWidth+(parseInt(n.marginLeft,10)||0)+(parseInt(n.marginRight,10)||0));if((o+=c)>=i){var f=t===h.Left?o-i:c;return(r.offsetWidth-f)*t}}return r.offsetWidth}(t),n=u.current.scrollLeft;C(500,e,n)},C=function(t,e,n){for(var r=0,i=0;r<=t;i++)window.setTimeout(x,r,i*e/100+n),r+=t/100},x=function(t){u.current.scrollLeft=t},A=function(e,n,r){return t.createElement("div",{"data-arrow":n,onClick:function(){return E(e)}},null!=r?r:t.createElement("button",null))};return t.createElement("div",{className:R+" "+s,"data-testid":"carousel"},y.left&&A(h.Right,"left",a),y.right&&A(h.Left,"right",l),t.createElement("div",{ref:k,onMouseDown:function(t){d(!0),g({startX:t.pageX-u.current.offsetLeft,scrollLeft:u.current.scrollLeft})},onMouseLeave:L,onMouseUp:L,onMouseMove:function(t){if(f){t.preventDefault(),u.current.classList.add(M);var e=t.pageX-u.current.offsetLeft-v.startX;u.current.scrollLeft=v.scrollLeft-e}},className:T},i))};export{x as Carousel,A as ScrollingCarousel};
